<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emrecord discord deÄŸil</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="titlebar" class="titlebar">
      <div class="titlebarDrag">
        <span class="appName">Emrecord discord deÄŸil</span>
      </div>
      <div class="windowControls">
        <button id="winMinimize" class="winBtn" title="Minimize" aria-label="Minimize">-</button>
        <button id="winMaximize" class="winBtn" title="Maximize" aria-label="Maximize">MAX</button>
        <button id="winFullscreen" class="winBtn" title="Fullscreen" aria-label="Fullscreen">FULL</button>
        <button id="winClose" class="winBtn danger" title="Close" aria-label="Close">X</button>
      </div>
    </div>
    <main class="app">
      <section id="lobbyView" class="view active">
        <div class="lobbyHeader">
          <div class="logo">ğŸ§</div>
          <h1>Emrecord discord deÄŸil</h1>
          <p class="subtitle">HÄ±zlÄ±ca odaya gir, konuÅŸ.</p>
        </div>

        <div class="card lobbyCard">
          <div class="row">
            <label for="nicknameInput" class="label" data-i18n="nicknameLabel">Takma ad</label>
            <input
              id="nicknameInput"
              class="input"
              placeholder="Ã¶rn: KullanÄ±cÄ±1234"
              data-i18n-placeholder="nicknamePlaceholder"
              autocomplete="off"
            />
          </div>

          <div class="row">
            <label for="roomId" class="label" data-i18n="roomIdLabel">Oda Kodu</label>
            <input
              id="roomId"
              class="input"
              placeholder="Ã¶rn: abc123"
              data-i18n-placeholder="roomIdPlaceholder"
              autocomplete="off"
            />
          </div>

          <div class="row buttons">
            <button id="createBtn" class="btn primary" data-i18n="createBtn">Oda OluÅŸtur</button>
            <button id="joinBtn" class="btn" data-i18n="joinBtn">Odaya KatÄ±l</button>
          </div>
        </div>
      </section>

      <section id="roomView" class="view">
        <header class="header roomHeader">
          <div class="headerTitle">
            <h1>EmreCord</h1>
            <p class="subtitle" data-i18n="subtitle">Sohbete hoÅŸ geldin</p>
          </div>
          <div class="statusBar">
            <div class="statusPill" id="statusConn">BaÄŸlÄ±: -</div>
            <div class="statusPill" id="statusPing" style="display: none;">Ping: -</div>
            <div class="statusPill" id="statusMic">Mikrofon(NR = GÃ¼rÃ¼ltÃ¼ Azaltma): -</div>
            <div class="statusPill" id="statusScreen">Ekran: -</div>
          </div>
          <button id="settingsBtn" class="btn iconBtn" title="Ayarlar">âš™ï¸</button>
        </header>

        <div class="layout roomLayout">
          <section class="card column leftColumn">
            <div class="cardTitle" data-i18n="participantsTitle">KatÄ±lÄ±mcÄ±lar</div>
            <ul id="usersList" class="users"></ul>
            <div class="cardTitle secondary" data-i18n="roomsTitle">Odalar</div>
            <div class="roomsList" id="roomsList"></div>
            <button id="refreshRoomsBtn" class="btn small" data-i18n="refreshRooms">Yenile</button>
          </section>

          <section class="card centerColumn">
            <div class="centerControls">
              <div class="primaryActions" style="margin-bottom: 15px;">
                <button id="muteBtn" class="btn primary micBtn" disabled data-i18n="muteBtn">Mikrofon</button>
                <div class="row">
                  <button id="speakerBtn" class="btn" data-i18n="speakerOn">Sesi Kapat</button>
                </div>
              </div>
              <div class="centerScroll">
                <div class="secondaryCard">
                  <div class="row micMeter">
                    <div class="labelRow">
                      <span class="label">Mikrofon</span>
                      <span id="micDb" class="mutedText">- dB</span>
                    </div>
                    <div class="vu">
                      <div id="vuFill" class="vuFill"></div>
                    </div>
                  </div>
                  <div class="row">
                    <button id="micTestBtn" class="btn">Mikrofon Testi</button>
                    <button id="echoTestBtn" class="btn">Echo Testi</button>
                  </div>
                </div>
                <div class="status">
                  <div class="statusTitle" data-i18n="statusTitle">Durum</div>
                  <pre id="statusText" class="statusText">HazÄ±r.</pre>
                </div>
                <div class="row leaveRow">
                  <button id="leaveBtn" class="btn danger" disabled data-i18n="leaveBtn">Ã‡Ä±k</button>
                </div>
              </div>
            </div>
          </section>

          <div class="rightColumn">
            <div class="tabBar">
              <button class="tabBtn active" data-tab="chat">Sohbet</button>
              <button class="tabBtn" data-tab="network">AÄŸ</button>
              <button class="tabBtn" data-tab="screen">Ekran</button>
              <button class="tabBtn" data-tab="controls">Kontroller</button>
              <button class="tabBtn" data-tab="log">Log</button>
            </div>

            <div class="tabContent">
              <section class="tabPane chatPane active" data-tab="chat">
                <div id="chatMessages" class="chatMessages"></div>
                <!-- <small class="mutedText">Komutlar: /yayÄ±n, /yayÄ±n kapa, /yayÄ±n aÃ§, /nick yeniad, /mute</small> -->
                <div class="chatInputRow">
                  <input
                    id="chatInput"
                    class="input"
                    placeholder="Mesaj yaz..."
                    data-i18n-placeholder="chatPlaceholder"
                    autocomplete="off"
                  />
                  <button id="chatSendBtn" class="btn primary" data-i18n="sendBtn">GÃ¶nder</button>
                </div>
              </section>

              <section class="card column statsCard tabPane" data-tab="network">
                <div class="cardTitle">AÄŸ Ä°statistikleri</div>
                <div class="statsGrid">
                  <div class="statItem"><span>Outbound</span><strong id="statOut">-</strong></div>
                  <div class="statItem"><span>Inbound</span><strong id="statIn">-</strong></div>
                  <div class="statItem"><span>Jitter</span><strong id="statJitter">-</strong></div>
                  <div class="statItem"><span>Loss</span><strong id="statLoss">-</strong></div>
                  <div class="statItem"><span>RTT</span><strong id="statRtt">-</strong></div>
                </div>
              </section>

              <section class="tabPane screenPane" data-tab="screen">
                <div class="screenHeader">
                  <div class="screenTitle" data-i18n="screenShareTitle">Ekran PaylaÅŸÄ±mÄ±</div>
                  <div class="screenActions">
                    <button id="screenShareBtn" class="btn" disabled data-i18n="screenShareStart">Ekran PaylaÅŸ</button>
                    <button id="screenStopBtn" class="btn danger" data-i18n="screenShareStop">PaylaÅŸÄ±mÄ± Durdur</button>
                    <button id="screenFullscreenBtn" class="btn small" data-i18n="fullscreenEnter">Tam Ekran</button>
                  </div>
                </div>
                <div id="screenPreview" class="screenPreview">
                  <video id="screenVideo" autoplay playsinline muted></video>
                  <div id="screenStatus" class="screenEmpty" data-i18n="screenShareEmpty">Ekran paylaÅŸÄ±mÄ± yok.</div>
                </div>
              </section>

              <section class="card column audioCardPanel tabPane" data-tab="controls">
                <div class="cardTitle" data-i18n="audioTitle">Ses Kontrolleri</div>
                <div id="audioList" class="audioList"></div>

                <div id="moderationPanel" class="accordion">
                  <button id="moderationToggle" class="accordionHeader">Moderasyon</button>
                  <div class="accordionBody">
                    <div class="row">
                      <label class="label" for="moderationTarget">KullanÄ±cÄ±</label>
                      <select id="moderationTarget" class="input"></select>
                    </div>
                    <div class="row buttons">
                      <button id="muteOtherBtn" class="btn">Sessize al</button>
                      <button id="unmuteOtherBtn" class="btn">Sesi aÃ§</button>
                      <button id="kickBtn" class="btn danger">Kick</button>
                      <button id="banBtn" class="btn danger">Ban</button>
                    </div>
                    <div class="row">
                      <label class="label" for="slowModeSelect">Slow mode</label>
                      <select id="slowModeSelect" class="input">
                        <option value="0">KapalÄ±</option>
                        <option value="2000">2 sn</option>
                        <option value="5000">5 sn</option>
                        <option value="10000">10 sn</option>
                      </select>
                      <button id="slowModeBtn" class="btn">Uygula</button>
                    </div>
                    <div class="row buttons">
                      <button id="softRefreshBtn" class="btn">BaÄŸlantÄ±larÄ± Yenile</button>
                      <button id="hardRefreshBtn" class="btn danger">Acil Reset (BaÄŸlantÄ±yÄ± SÄ±fÄ±rla)</button>
                    </div>
                  </div>
                </div>
              </section>

              <section class="card column logCard tabPane" data-tab="log">
                <div class="cardTitle" data-i18n="logTitle">Log</div>
                <div class="row buttons">
                  <button id="logCopyBtn" class="btn">Kopyala</button>
                  <button id="logClearBtn" class="btn danger">Temizle</button>
                </div>
                <pre id="log" class="logText logFull"></pre>
              </section>
            </div>
          </div>
        </div>
      </section>

      <div id="settingsDrawer" class="drawer hidden">
        <div class="drawerContent">
          <div class="drawerHeader">
            <h3>Ayarlar</h3>
            <button id="settingsClose" class="btn small">Kapat</button>
          </div>
          <div class="drawerBody">
            <div class="row">
              <label for="micSelect" class="label">Mikrofon CihazÄ±</label>
              <select id="micSelect" class="input"></select>
            </div>
            <div class="row">
              <label for="outputSelect" class="label">HoparlÃ¶r CihazÄ±</label>
              <select id="outputSelect" class="input"></select>
            </div>
            <div class="row toggles">
              <label class="switch">
                <input id="noiseToggle" type="checkbox" checked />
                <span class="switchSlider"></span>
                <span class="switchLabel" data-i18n="noiseToggle">GÃ¼rÃ¼ltÃ¼ azaltma</span>
              </label>
              <label class="switch">
                <input id="agcToggle" type="checkbox" checked />
                <span class="switchSlider"></span>
                <span class="switchLabel">AGC (Otomatik Gain)</span>
              </label>
            </div>

            <div class="row audioSettings">
              <div class="sliderRow">
                <label class="label" for="micGain">Mikrofon Seviyesi</label>
                <span id="micGainValue" class="mutedText">100%</span>
              </div>
              <input id="micGain" type="range" min="0" max="200" step="1" value="100" />
              <div class="sliderRow">
                <label class="label" for="highPassFreq" data-i18n="highPassLabel">High-pass (Hz)</label>
                <span id="highPassValue" class="mutedText">90 Hz</span>
              </div>
              <input id="highPassFreq" type="range" min="60" max="200" step="1" value="90" />
              <label class="switch">
                <input id="compressorToggle" type="checkbox" />
                <span class="switchSlider"></span>
                <span class="switchLabel" data-i18n="compressorToggle">Compressor</span>
              </label>
              <div class="sliderRow">
                <label class="label" for="gateThreshold" data-i18n="gateThresholdLabel">Gate Threshold (dB)</label>
                <span id="gateThresholdValue" class="mutedText">-40 dB</span>
              </div>
              <input id="gateThreshold" type="range" min="-60" max="-20" step="1" value="-40" />
              <div class="sliderRow">
                <label class="label" for="gateAttack" data-i18n="gateAttackLabel">Gate Attack (ms)</label>
                <span id="gateAttackValue" class="mutedText">5 ms</span>
              </div>
              <input id="gateAttack" type="range" min="1" max="50" step="1" value="5" />
              <div class="sliderRow">
                <label class="label" for="gateRelease" data-i18n="gateReleaseLabel">Gate Release (ms)</label>
                <span id="gateReleaseValue" class="mutedText">150 ms</span>
              </div>
              <input id="gateRelease" type="range" min="20" max="400" step="1" value="150" />
              <div class="sliderRow">
                <label class="label" for="gateFloor" data-i18n="gateFloorLabel">Gate Floor (dB)</label>
                <span id="gateFloorValue" class="mutedText">-60 dB</span>
              </div>
              <input id="gateFloor" type="range" min="-80" max="-30" step="1" value="-60" />
            </div>

            <div class="accordion open">
              <button class="accordionHeader">Advanced</button>
              <div class="accordionBody">
                <div class="row">
                  <label for="serverUrlInput" class="label" data-i18n="serverUrlLabel">Signaling Server URL</label>
                  <input
                    id="serverUrlInput"
                    class="input"
                    placeholder="Ã¶rn: https://your-signal-server.com"
                    data-i18n-placeholder="serverUrlPlaceholder"
                    autocomplete="off"
                  />
                </div>
                <div class="row">
                  <label for="modeSelect" class="label">BaÄŸlantÄ± Modu</label>
                  <select id="modeSelect" class="input">
                    <option value="mesh">Mesh (VarsayÄ±lan)</option>
                    <option value="sfu">SFU (yakÄ±nda)</option>
                  </select>
                </div>
                <div class="row">
                  <label for="screenQuality" class="label">Ekran PaylaÅŸÄ±m Kalitesi</label>
                  <select id="screenQuality" class="input">
                    <option value="low">Low (720p 15fps)</option>
                    <option value="medium">Medium (720p 20fps)</option>
                    <option value="high">High (900p 24fps)</option>
                  </select>
                </div>
                <div class="row toggles">
                  <label class="switch">
                    <input id="listenOnlyToggle" type="checkbox" />
                    <span class="switchSlider"></span>
                    <span class="switchLabel">Listenâ€‘only (Mikrofon kapalÄ±)</span>
                  </label>
                  <label class="switch">
                    <input id="deafToggle" type="checkbox" />
                    <span class="switchSlider"></span>
                    <span class="switchLabel">Deaf (Sesleri kapat)</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <small id="version">SÃ¼rÃ¼m 2.1.0 (Yeni BaÄŸlantÄ± TÃ¼rÃ¼ Test)</small>
    <div id="toastContainer" class="toastContainer"></div>

    <div id="micTestModal" class="modal hidden">
      <div class="modalContent">
        <div class="modalHeader">
          <h3>Mikrofon Testi</h3>
          <button id="micTestClose" class="btn small">Kapat</button>
        </div>
        <div class="modalBody">
          <div class="vu">
            <div id="micTestVuFill" class="vuFill"></div>
          </div>
          <div class="mutedText" id="micTestDb">- dB</div>
          <audio id="micLoopback" autoplay></audio>
          <div class="row">
            <button id="micTestStart" class="btn primary">BaÅŸlat</button>
            <button id="micTestStop" class="btn">Durdur</button>
          </div>
          <div class="row">
            <div class="mutedText">Echo testi sonucu: <strong id="echoResult">-</strong></div>
          </div>
        </div>
      </div>
    </div>
    <div id="screenModal" class="modal hidden">
      <div class="modalContent screenModalContent">
        <div class="modalHeader screenModalHeader">
          <h3>Ekran PaylaÅŸÄ±mÄ±</h3>
          <button id="screenModalClose" class="btn small">Kapat</button>
        </div>
        <div class="screenModalBody">
          <video id="screenModalVideo" autoplay playsinline muted></video>
          <div id="screenModalStatus" class="screenModalStatus">Ekran paylaÅŸÄ±mÄ± yok.</div>
        </div>
      </div>
    </div>
    <script type="importmap">
      {
        "imports": {
          "livekit-client": "./livekit-client-resolver.js"
        }
      }
    </script>
    <script type="module" src="./app.js"></script>
  </body>
</html>

