<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emrecord discord deƒüil</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <section id="lobbyView" class="view active">
        <div class="lobbyHeader">
          <div class="logo">üéß</div>
          <h1>Emrecord discord deƒüil</h1>
          <p class="subtitle">Hƒ±zlƒ±ca odaya gir, konu≈ü.</p>
        </div>

        <div class="card lobbyCard">
          <div class="row">
            <label for="nicknameInput" class="label" data-i18n="nicknameLabel">Takma ad</label>
            <input
              id="nicknameInput"
              class="input"
              placeholder="√∂rn: Kullanƒ±cƒ±1234"
              data-i18n-placeholder="nicknamePlaceholder"
              autocomplete="off"
            />
          </div>

          <div class="row">
            <label for="roomId" class="label" data-i18n="roomIdLabel">Oda Kodu</label>
            <input
              id="roomId"
              class="input"
              placeholder="√∂rn: abc123"
              data-i18n-placeholder="roomIdPlaceholder"
              autocomplete="off"
            />
          </div>

          <div class="row buttons">
            <button id="createBtn" class="btn primary" data-i18n="createBtn">Oda Olu≈ütur</button>
            <button id="joinBtn" class="btn" data-i18n="joinBtn">Odaya Katƒ±l</button>
          </div>
        </div>
      </section>

      <section id="roomView" class="view">
        <header class="header roomHeader">
          <div class="headerTitle">
            <h1>Oda</h1>
            <p class="subtitle" data-i18n="subtitle">Sohbete ho≈ü geldin</p>
          </div>
          <div class="statusBar">
            <div class="statusPill" id="statusConn">Baƒülƒ±: -</div>
            <div class="statusPill" id="statusPing">Ping: -</div>
            <div class="statusPill" id="statusMic">Mikrofon: -</div>
            <div class="statusPill" id="statusScreen">Ekran: -</div>
          </div>
          <button id="settingsBtn" class="btn iconBtn" title="Ayarlar">‚öôÔ∏è</button>
        </header>

        <div class="layout roomLayout">
          <section class="card column leftColumn">
            <div class="cardTitle" data-i18n="participantsTitle">Katƒ±lƒ±mcƒ±lar</div>
            <ul id="usersList" class="users"></ul>
            <div class="cardTitle secondary" data-i18n="roomsTitle">Odalar</div>
            <div class="roomsList" id="roomsList"></div>
            <button id="refreshRoomsBtn" class="btn small" data-i18n="refreshRooms">Yenile</button>
          </section>

          <section class="card centerColumn">
            <div class="centerControls">
              <button id="muteBtn" class="btn primary micBtn" disabled data-i18n="muteBtn">Mikrofon</button>
              <div class="row">
                <button id="screenShareBtn" class="btn" disabled data-i18n="screenShareStart">Ekran Payla≈ü</button>
                <button id="speakerBtn" class="btn" data-i18n="speakerOn">Sesi Kapat</button>
              </div>
              <div class="row micMeter">
                <div class="labelRow">
                  <span class="label">Mikrofon</span>
                  <span id="micDb" class="mutedText">- dB</span>
                </div>
                <div class="vu">
                  <div id="vuFill" class="vuFill"></div>
                </div>
              </div>
              <div class="row">
                <button id="micTestBtn" class="btn">Mikrofon Testi</button>
                <button id="echoTestBtn" class="btn">Echo Testi</button>
                <button id="leaveBtn" class="btn danger" disabled data-i18n="leaveBtn">√áƒ±k</button>
              </div>
              <div class="status">
                <div class="statusTitle" data-i18n="statusTitle">Durum</div>
                <pre id="statusText" class="statusText">Hazƒ±r.</pre>
              </div>
            </div>
          </section>

          <div class="rightColumn">
            <div class="tabBar">
              <button class="tabBtn active" data-tab="chat">Sohbet</button>
              <button class="tabBtn" data-tab="network">Aƒü</button>
              <button class="tabBtn" data-tab="controls">Kontroller</button>
              <button class="tabBtn" data-tab="log">Log</button>
            </div>

            <div class="tabContent">
              <section class="card column chatCard tabPane active" data-tab="chat">
                <div class="cardTitle" data-i18n="chatTitle">Sohbet</div>
                <div id="chatMessages" class="chatMessages"></div>
                <div class="chatInputRow">
                  <input
                    id="chatInput"
                    class="input"
                    placeholder="Mesaj yaz..."
                    data-i18n-placeholder="chatPlaceholder"
                    autocomplete="off"
                  />
                  <button id="chatSendBtn" class="btn primary" data-i18n="sendBtn">G√∂nder</button>
                </div>
              </section>

              <section class="card column statsCard tabPane" data-tab="network">
                <div class="cardTitle">Aƒü ƒ∞statistikleri</div>
                <div class="statsGrid">
                  <div class="statItem"><span>Outbound</span><strong id="statOut">-</strong></div>
                  <div class="statItem"><span>Inbound</span><strong id="statIn">-</strong></div>
                  <div class="statItem"><span>Jitter</span><strong id="statJitter">-</strong></div>
                  <div class="statItem"><span>Loss</span><strong id="statLoss">-</strong></div>
                  <div class="statItem"><span>RTT</span><strong id="statRtt">-</strong></div>
                </div>
              </section>

              <section class="card column audioCardPanel tabPane" data-tab="controls">
                <div class="cardTitle" data-i18n="audioTitle">Ses Kontrolleri</div>
                <div id="audioList" class="audioList"></div>

                <div class="cardTitle secondary" data-i18n="screenShareTitle">Ekran Payla≈üƒ±mƒ±</div>
                <div class="screenContainer">
                  <video id="screenVideo" autoplay playsinline muted></video>
                  <button id="screenFullscreenBtn" class="btn small" data-i18n="fullscreenEnter">Tam Ekran</button>
                  <div id="screenStatus" class="mutedText" data-i18n="screenShareEmpty">Ekran payla≈üƒ±mƒ± yok.</div>
                </div>

                <div id="moderationPanel" class="accordion">
                  <button id="moderationToggle" class="accordionHeader">Moderasyon</button>
                  <div class="accordionBody">
                    <div class="row">
                      <label class="label" for="moderationTarget">Kullanƒ±cƒ±</label>
                      <select id="moderationTarget" class="input"></select>
                    </div>
                    <div class="row buttons">
                      <button id="muteOtherBtn" class="btn">Sessize al</button>
                      <button id="unmuteOtherBtn" class="btn">Sesi a√ß</button>
                      <button id="kickBtn" class="btn danger">Kick</button>
                      <button id="banBtn" class="btn danger">Ban</button>
                    </div>
                    <div class="row">
                      <label class="label" for="slowModeSelect">Slow mode</label>
                      <select id="slowModeSelect" class="input">
                        <option value="0">Kapalƒ±</option>
                        <option value="2000">2 sn</option>
                        <option value="5000">5 sn</option>
                        <option value="10000">10 sn</option>
                      </select>
                      <button id="slowModeBtn" class="btn">Uygula</button>
                    </div>
                  </div>
                </div>
              </section>

              <section class="card column logCard tabPane" data-tab="log">
                <div class="cardTitle" data-i18n="logTitle">Log</div>
                <div class="row buttons">
                  <button id="logCopyBtn" class="btn">Kopyala</button>
                  <button id="logClearBtn" class="btn danger">Temizle</button>
                </div>
                <pre id="log" class="logText logFull"></pre>
              </section>
            </div>
          </div>
        </div>
      </section>

      <div id="settingsDrawer" class="drawer hidden">
        <div class="drawerContent">
          <div class="drawerHeader">
            <h3>Ayarlar</h3>
            <button id="settingsClose" class="btn small">Kapat</button>
          </div>
          <div class="drawerBody">
            <div class="row">
              <label for="micSelect" class="label">Mikrofon Cihazƒ±</label>
              <select id="micSelect" class="input"></select>
            </div>
            <div class="row">
              <label for="outputSelect" class="label">Hoparl√∂r Cihazƒ±</label>
              <select id="outputSelect" class="input"></select>
            </div>
            <div class="row toggles">
              <label class="switch">
                <input id="noiseToggle" type="checkbox" checked />
                <span class="switchSlider"></span>
                <span class="switchLabel" data-i18n="noiseToggle">G√ºr√ºlt√º azaltma</span>
              </label>
              <label class="switch">
                <input id="agcToggle" type="checkbox" checked />
                <span class="switchSlider"></span>
                <span class="switchLabel">AGC (Otomatik Gain)</span>
              </label>
              <label class="switch">
                <input id="advancedAudioToggle" type="checkbox" checked />
                <span class="switchSlider"></span>
                <span class="switchLabel" data-i18n="advancedAudioToggle">Geli≈ümi≈ü G√ºr√ºlt√º Azaltma</span>
              </label>
            </div>

            <div class="row audioSettings">
              <div class="sliderRow">
                <label class="label" for="highPassFreq" data-i18n="highPassLabel">High-pass (Hz)</label>
                <span id="highPassValue" class="mutedText">90 Hz</span>
              </div>
              <input id="highPassFreq" type="range" min="60" max="200" step="1" value="90" />
              <label class="switch">
                <input id="compressorToggle" type="checkbox" />
                <span class="switchSlider"></span>
                <span class="switchLabel" data-i18n="compressorToggle">Compressor</span>
              </label>
              <div class="sliderRow">
                <label class="label" for="gateThreshold" data-i18n="gateThresholdLabel">Gate Threshold (dB)</label>
                <span id="gateThresholdValue" class="mutedText">-40 dB</span>
              </div>
              <input id="gateThreshold" type="range" min="-60" max="-20" step="1" value="-40" />
              <div class="sliderRow">
                <label class="label" for="gateAttack" data-i18n="gateAttackLabel">Gate Attack (ms)</label>
                <span id="gateAttackValue" class="mutedText">5 ms</span>
              </div>
              <input id="gateAttack" type="range" min="1" max="50" step="1" value="5" />
              <div class="sliderRow">
                <label class="label" for="gateRelease" data-i18n="gateReleaseLabel">Gate Release (ms)</label>
                <span id="gateReleaseValue" class="mutedText">150 ms</span>
              </div>
              <input id="gateRelease" type="range" min="20" max="400" step="1" value="150" />
              <div class="sliderRow">
                <label class="label" for="gateFloor" data-i18n="gateFloorLabel">Gate Floor (dB)</label>
                <span id="gateFloorValue" class="mutedText">-60 dB</span>
              </div>
              <input id="gateFloor" type="range" min="-80" max="-30" step="1" value="-60" />
            </div>

            <div class="accordion open">
              <button class="accordionHeader">Advanced</button>
              <div class="accordionBody">
                <div class="row">
                  <label for="serverUrlInput" class="label" data-i18n="serverUrlLabel">Signaling Server URL</label>
                  <input
                    id="serverUrlInput"
                    class="input"
                    placeholder="√∂rn: https://your-signal-server.com"
                    data-i18n-placeholder="serverUrlPlaceholder"
                    autocomplete="off"
                  />
                </div>
                <div class="row">
                  <label for="modeSelect" class="label">Baƒülantƒ± Modu</label>
                  <select id="modeSelect" class="input">
                    <option value="mesh">Mesh (Varsayƒ±lan)</option>
                    <option value="sfu">SFU (yakƒ±nda)</option>
                  </select>
                </div>
                <div class="row toggles">
                  <label class="switch">
                    <input id="listenOnlyToggle" type="checkbox" />
                    <span class="switchSlider"></span>
                    <span class="switchLabel">Listen‚Äëonly (Mikrofon kapalƒ±)</span>
                  </label>
                  <label class="switch">
                    <input id="deafToggle" type="checkbox" />
                    <span class="switchSlider"></span>
                    <span class="switchLabel">Deaf (Sesleri kapat)</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <small id="version">S√ºr√ºm 0.2.5 Beta</small>
    <div id="toastContainer" class="toastContainer"></div>

    <div id="micTestModal" class="modal hidden">
      <div class="modalContent">
        <div class="modalHeader">
          <h3>Mikrofon Testi</h3>
          <button id="micTestClose" class="btn small">Kapat</button>
        </div>
        <div class="modalBody">
          <div class="vu">
            <div id="micTestVuFill" class="vuFill"></div>
          </div>
          <div class="mutedText" id="micTestDb">- dB</div>
          <audio id="micLoopback" autoplay></audio>
          <div class="row">
            <button id="micTestStart" class="btn primary">Ba≈ülat</button>
            <button id="micTestStop" class="btn">Durdur</button>
          </div>
          <div class="row">
            <div class="mutedText">Echo testi sonucu: <strong id="echoResult">-</strong></div>
          </div>
        </div>
      </div>
    </div>
    <!-- Socket.io client (CDN) -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="./app.js"></script>
  </body>
</html>

